---
description:
globs:
alwaysApply: false
---
# æ•…éšœæ’é™¤æŒ‡å—

## ğŸš¨ å¸¸è¦‹å•é¡Œèˆ‡è§£æ±ºæ–¹æ¡ˆ

### 1. æœå‹™å•Ÿå‹•å•é¡Œ

#### Docker å®¹å™¨ç„¡æ³•å•Ÿå‹•
```bash
# æª¢æŸ¥ Docker ç‹€æ…‹
docker ps -a

# é‡æ–°å•Ÿå‹•æœå‹™
cd query-service
./deploy_docker.sh restart

# æŸ¥çœ‹å®¹å™¨æ—¥èªŒ
docker logs query-service-localstack-1
docker logs query-service-eks-handler-1
```

#### ç«¯å£è¡çª
```bash
# æª¢æŸ¥ç«¯å£ä½”ç”¨
lsof -i :8000
lsof -i :4566

# åœæ­¢æ‰€æœ‰æœå‹™
docker-compose down

# é‡æ–°å•Ÿå‹•
./deploy_docker.sh start
```

### 2. API é€£æ¥å•é¡Œ

#### API Gateway ç„¡å›æ‡‰
```bash
# ä¿®å¾© API Gateway é…ç½®
./scripts/infrastructure/fix_api_gateway.sh

# æª¢æŸ¥ API Gateway ç‹€æ…‹
awslocal apigateway get-rest-apis
```

#### å¥åº·æª¢æŸ¥å¤±æ•—
```bash
# æ¸¬è©¦æœå‹™å¥åº·ç‹€æ…‹
curl "http://localhost:8000/health"

# æª¢æŸ¥ FastAPI æœå‹™æ—¥èªŒ
docker logs query-service-eks-handler-1 -f
```

### 3. æ¸¬è©¦åŸ·è¡Œå•é¡Œ

#### æ¸¬è©¦å¤±æ•—
```bash
# æ¸…ç†æ¸¬è©¦ç’°å¢ƒ
poetry run pytest --cache-clear

# é‡æ–°åŸ·è¡Œå¤±æ•—çš„æ¸¬è©¦
poetry run pytest --lf -v

# æª¢æŸ¥æ¸¬è©¦è¦†è“‹ç‡
poetry run pytest --cov-report=term-missing
```

#### Import éŒ¯èª¤
```bash
# é‡æ–°å®‰è£ä¾è³´
poetry install --no-cache

# æª¢æŸ¥ Python è·¯å¾‘
poetry run python -c "import sys; print(sys.path)"
```

### 4. æ—¥èªŒæŸ¥çœ‹èˆ‡åˆ†æ

#### é‡è¦æ—¥èªŒä½ç½®
- **FastAPI æœå‹™**: `docker logs query-service-eks-handler-1`
- **Lambda å‡½æ•¸**: `docker logs query-service-query-lambda-1`
- **LocalStack**: `docker logs query-service-localstack-1`

#### å¸¸ç”¨é™¤éŒ¯æŒ‡ä»¤
```bash
# å³æ™‚æŸ¥çœ‹æ—¥èªŒ
docker logs -f query-service-eks-handler-1

# æª¢æŸ¥ AWS æœå‹™ç‹€æ…‹
awslocal dynamodb list-tables
awslocal lambda list-functions

# ç³»çµ±é©—è­‰
./scripts/verification/verify_system.sh
```

## ğŸ”§ æ•ˆèƒ½å•é¡Œæ’è§£

### æŸ¥è©¢ç·©æ…¢
1. æª¢æŸ¥ DynamoDB è¡¨æ ¼ç´¢å¼•
2. é©—è­‰ Lambda å‡½æ•¸è¨˜æ†¶é«”é…ç½®
3. æª¢æŸ¥ç¶²è·¯é€£æ¥å»¶é²

### è¨˜æ†¶é«”ä½¿ç”¨éé«˜
1. ç›£æ§ Docker å®¹å™¨è³‡æºä½¿ç”¨
2. æª¢æŸ¥æ¸¬è©¦ä¸¦è¡ŒåŸ·è¡Œæ•¸é‡
3. æ¸…ç†æš«å­˜æª”æ¡ˆ

## ğŸ“ ç·Šæ€¥è™•ç†ç¨‹åº

### å®Œå…¨é‡ç½®ç’°å¢ƒ
```bash
# 1. åœæ­¢æ‰€æœ‰æœå‹™
docker-compose down -v

# 2. æ¸…ç† Docker è³‡æº
docker system prune -f

# 3. é‡æ–°åˆå§‹åŒ–
./scripts/deployment/restart_services.sh

# 4. åŸ·è¡Œé©—è­‰
./scripts/testing/quick_test.sh
```
