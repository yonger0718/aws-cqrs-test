---
description:
globs:
alwaysApply: false
---
# å¿«é€ŸæŒ‡ä»¤åƒè€ƒ

## ğŸš€ å¸¸ç”¨é–‹ç™¼æŒ‡ä»¤

### ç’°å¢ƒç®¡ç†
```bash
# å®‰è£ä¾è³´
poetry install

# å•Ÿå‹•æœå‹™
cd query-service && ./deploy_docker.sh start

# é‡å•Ÿæœå‹™
./scripts/deployment/restart_services.sh

# æª¢æŸ¥ç‹€æ…‹
./scripts/testing/quick_test.sh
```

### æ¸¬è©¦åŸ·è¡Œ
```bash
# åŸ·è¡Œæ‰€æœ‰æ¸¬è©¦
poetry run pytest

# å–®å…ƒæ¸¬è©¦
poetry run pytest -m unit

# è¦†è“‹ç‡å ±å‘Š
poetry run pytest --cov=query-service/eks_handler --cov-report=html

# ç‰¹å®šæª”æ¡ˆæ¸¬è©¦
poetry run pytest query-service/tests/test_eks_handler.py -v
```

### API æ¸¬è©¦
```bash
# å¥åº·æª¢æŸ¥
curl "http://localhost:8000/health"

# æŸ¥è©¢äº¤æ˜“
curl "http://localhost:8000/tx?transaction_id=tx_001"

# æŸ¥è©¢å¤±æ•—è¨˜éŒ„
curl "http://localhost:8000/fail"

# SNS æŸ¥è©¢
curl "http://localhost:8000/sns?sns_id=sns-12345"
```

### ç¨‹å¼ç¢¼å“è³ª
```bash
# Pre-commit æª¢æŸ¥
pre-commit run --all-files

# æ ¼å¼åŒ–ç¨‹å¼ç¢¼
poetry run black query-service/
poetry run isort query-service/

# é¡å‹æª¢æŸ¥
poetry run mypy query-service/

# èªæ³•æª¢æŸ¥
poetry run flake8 query-service/
```

### Docker ç®¡ç†
```bash
# æŸ¥çœ‹å®¹å™¨ç‹€æ…‹
docker ps

# æŸ¥çœ‹æ—¥èªŒ
docker logs query-service-eks-handler-1 -f

# é‡æ–°å»ºç½®
cd query-service && ./deploy_docker.sh rebuild

# æ¸…ç†è³‡æº
docker system prune -f
```

### AWS Local æ“ä½œ
```bash
# DynamoDB æ“ä½œ
awslocal dynamodb list-tables
awslocal dynamodb scan --table-name notification-records

# Lambda æ“ä½œ
awslocal lambda list-functions
awslocal lambda invoke --function-name query-lambda

# API Gateway
awslocal apigateway get-rest-apis
```

## âš¡ ä¸€éµå¼å·¥ä½œæµç¨‹

### é–‹ç™¼å•Ÿå‹•
```bash
# å®Œæ•´é–‹ç™¼ç’°å¢ƒå•Ÿå‹•
poetry install && \
cd query-service && \
./deploy_docker.sh start && \
cd .. && \
./scripts/testing/quick_test.sh
```

### æäº¤å‰æª¢æŸ¥
```bash
# å®Œæ•´æª¢æŸ¥æµç¨‹
pre-commit run --all-files && \
poetry run pytest && \
./scripts/testing/test_full_flow.sh
```

### æ•…éšœæ’é™¤
```bash
# å¿«é€Ÿé‡ç½®
docker-compose down -v && \
./scripts/deployment/restart_services.sh && \
./scripts/infrastructure/fix_api_gateway.sh
```

## ğŸ“± å¸¸ç”¨æª”æ¡ˆè·¯å¾‘

### ä¸»è¦ç¨‹å¼ç¢¼
- [FastAPI ä¸»æª”æ¡ˆ](mdc:query-service/eks_handler/main.py)
- [ä¸»è¦æ¸¬è©¦æª”æ¡ˆ](mdc:query-service/tests/test_eks_handler.py)
- [å°ˆæ¡ˆé…ç½®](mdc:pyproject.toml)

### é…ç½®æª”æ¡ˆ
- [Docker Compose](mdc:query-service/docker-compose.yml)
- [Pre-commit é…ç½®](mdc:.pre-commit-config.yaml)
- [æ¸¬è©¦é…ç½®](mdc:query-service/tests/conftest.py)

### è…³æœ¬å·¥å…·
- [éƒ¨ç½²è…³æœ¬](mdc:query-service/deploy_docker.sh)
- [æŸ¥è©¢å·¥å…·](mdc:scripts/queries/simple_query.sh)
- [ç³»çµ±é©—è­‰](mdc:scripts/verification/verify_system.sh)
