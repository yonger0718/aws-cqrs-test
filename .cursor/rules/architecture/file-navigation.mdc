---
description:
globs:
alwaysApply: false
---
# æ–‡ä»¶å°èˆªæŒ‡å—

## ğŸ“ å°ˆæ¡ˆçµæ§‹æ¦‚è¦½

### æ ¸å¿ƒæœå‹™ç›®éŒ„

#### ğŸš€ Query Service (æŸ¥è©¢æœå‹™)
- **ä¸»è¦å…¥å£**: [query-service/eks_handler/main.py](mdc:query-service/eks_handler/main.py)
  - FastAPI æ‡‰ç”¨ç¨‹å¼ä¸»æ–‡ä»¶
  - å…­é‚Šå½¢æ¶æ§‹å¯¦ç¾
  - API ç«¯é»å®šç¾©

- **Lambda å‡½æ•¸**: [query-service/lambdas/](mdc:query-service/lambdas)
  - [stream_processor_lambda/](mdc:query-service/lambdas/stream_processor_lambda) - DynamoDB Stream è™•ç†å™¨
  - [query_lambda/](mdc:query-service/lambdas/query_lambda) - æŸ¥è©¢è™•ç† Lambda
  - [query_result_lambda/](mdc:query-service/lambdas/query_result_lambda) - æŸ¥è©¢çµæœè™•ç†

#### ğŸ§ª æ¸¬è©¦æ–‡ä»¶
- **ä¸»è¦æ¸¬è©¦**: [query-service/tests/test_eks_handler.py](mdc:query-service/tests/test_eks_handler.py)
  - FastAPI æœå‹™çš„å®Œæ•´æ¸¬è©¦å¥—ä»¶
  - å–®å…ƒæ¸¬è©¦èˆ‡æ•´åˆæ¸¬è©¦

- **æ•´åˆæ¸¬è©¦**: [query-service/tests/test_integration.py](mdc:query-service/tests/test_integration.py)
  - ç«¯åˆ°ç«¯æ¸¬è©¦æµç¨‹
  - API æ•´åˆé©—è­‰

- **æ¸¬è©¦é…ç½®**: [query-service/tests/conftest.py](mdc:query-service/tests/conftest.py)
  - pytest é…ç½®å’Œå…±ç”¨ fixtures

#### âš™ï¸ åŸºç¤è¨­æ–½èˆ‡éƒ¨ç½²
- **Docker**: [query-service/docker-compose.yml](mdc:query-service/docker-compose.yml)
  - æœ¬åœ°é–‹ç™¼ç’°å¢ƒé…ç½®
  - LocalStack æ•´åˆ

- **ECS é…ç½®**: [query-service/infra/ecs/](mdc:query-service/infra/ecs)
  - å®¹å™¨åŒ–éƒ¨ç½²é…ç½®

- **API Gateway**: [query-service/infra/api-gateway/](mdc:query-service/infra/api-gateway)
  - API é–˜é“å™¨é…ç½®

### ğŸ› ï¸ è‡ªå‹•åŒ–è…³æœ¬

#### éƒ¨ç½²è…³æœ¬
- **æœå‹™é‡å•Ÿ**: [scripts/deployment/restart_services.sh](mdc:scripts/deployment)
- **Docker éƒ¨ç½²**: [query-service/deploy_docker.sh](mdc:query-service/deploy_docker.sh)

#### æ¸¬è©¦è…³æœ¬
- **å®Œæ•´æ¸¬è©¦**: [scripts/testing/test_full_flow.sh](mdc:scripts/testing)
- **å¿«é€Ÿé©—è­‰**: [scripts/testing/quick_test.sh](mdc:scripts/testing)

#### æŸ¥è©¢å·¥å…·
- **æŸ¥è©¢æ¸¬è©¦**: [scripts/queries/test_query.sh](mdc:scripts/queries)
- **ç°¡åŒ–æŸ¥è©¢**: [scripts/queries/simple_query.sh](mdc:scripts/queries)

#### åŸºç¤è¨­æ–½ç®¡ç†
- **API Gateway ä¿®å¾©**: [scripts/infrastructure/fix_api_gateway.sh](mdc:scripts/infrastructure)
- **ç³»çµ±é©—è­‰**: [scripts/verification/verify_system.sh](mdc:scripts/verification)

### ğŸ“‹ é…ç½®æ–‡ä»¶

#### å°ˆæ¡ˆé…ç½®
- **Poetry ä¾è³´**: [pyproject.toml](mdc:pyproject.toml)
  - Python ä¾è³´ç®¡ç†
  - æ¸¬è©¦é…ç½®
  - ç¨‹å¼ç¢¼å“è³ªå·¥å…·è¨­å®š

- **Pre-commit**: [.pre-commit-config.yaml](mdc:.pre-commit-config.yaml)
  - ç¨‹å¼ç¢¼å“è³ªæª¢æŸ¥
  - è‡ªå‹•æ ¼å¼åŒ–

#### é–‹ç™¼å·¥å…·
- **Makefile**: [Makefile](mdc:Makefile)
  - å¸¸ç”¨æŒ‡ä»¤ç°¡åŒ–
  - é–‹ç™¼æµç¨‹è‡ªå‹•åŒ–

### ğŸ“š æ–‡æª”èˆ‡æŒ‡å—

#### å°ˆæ¡ˆæ–‡æª”
- **ä¸»è¦ README**: [README.md](mdc:README.md)
  - å°ˆæ¡ˆæ¦‚è¦½èˆ‡å¿«é€Ÿé–‹å§‹
  - æ¶æ§‹èªªæ˜

- **Lambda æ¸¬è©¦æŒ‡å—**: [query-service/LAMBDA_TESTING_GUIDE.md](mdc:query-service/LAMBDA_TESTING_GUIDE.md)
  - Lambda å‡½æ•¸æ¸¬è©¦æ–¹æ³•

#### é–‹ç™¼æŒ‡å—
- **æ¸¬è©¦èªªæ˜**: [query-service/tests/README.md](mdc:query-service/tests/README.md)
  - æ¸¬è©¦æ¶æ§‹èˆ‡åŸ·è¡Œæ–¹å¼

- **è…³æœ¬æ–‡æª”**: [scripts/README.md](mdc:scripts/README.md)
  - è‡ªå‹•åŒ–è…³æœ¬ä½¿ç”¨èªªæ˜

## ğŸ” å¿«é€Ÿå®šä½æŒ‡å—

### æƒ³è¦...
- **ä¿®æ”¹ API ç«¯é»**: æŸ¥çœ‹ [main.py](mdc:query-service/eks_handler/main.py)
- **æ–°å¢æ¸¬è©¦**: ç·¨è¼¯ [test_eks_handler.py](mdc:query-service/tests/test_eks_handler.py)
- **èª¿æ•´ Lambda**: å‰å¾€ [lambdas/](mdc:query-service/lambdas) ç›®éŒ„
- **ä¿®æ”¹ä¾è³´**: ç·¨è¼¯ [pyproject.toml](mdc:pyproject.toml)
- **éƒ¨ç½²ç›¸é—œ**: æŸ¥çœ‹ [scripts/deployment/](mdc:scripts/deployment) æˆ– [deploy_docker.sh](mdc:query-service/deploy_docker.sh)
- **åŸºç¤è¨­æ–½**: å‰å¾€ [query-service/infra/](mdc:query-service/infra) ç›®éŒ„
